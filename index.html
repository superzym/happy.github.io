<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>生日快乐</title>
    <style>
      body {
        background-color: black;
        overflow: hidden;
      }
      canvas {
        position: absolute;
        top: 0;
        left: 0;
        pointer-events: none;
      }
    </style>
  </head>
  <body>
    <canvas id="fireworks"></canvas>
    <script>
      var canvas = document.getElementById("fireworks");
      var ctx = canvas.getContext("2d");
      var particles = [];
      var maxParticles = 50;

      var Particle = function (x, y) {
        this.x = x;
        this.y = y;
        this.velX = Math.random() * 2 - 1;
        this.velY = Math.random() * 2 - 1;
        this.color = "#FFF";
        this.size = Math.random() * 3;
      };

      Particle.prototype.update = function () {
        this.x += this.velX;
        this.y += this.velY;
        this.size *= 0.9;
      };

      Particle.prototype.render = function () {
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.closePath();
        ctx.fill();
      };

      function createParticles(x, y) {
        for (var i = 0; i < maxParticles; i++) {
          particles.push(new Particle(x, y));
        }
      }

      function loop() {
        // 清除画布
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // 更新并渲染粒子
        for (var i = 0; i < particles.length; i++) {
          particles[i].update();
          particles[i].render();

          // 移除已经消失的粒子
          if (particles[i].size <= 0.1) {
            particles.splice(i, 1);
          }
        }

        // 继续循环
        requestAnimationFrame(loop);
      }

      // 监听鼠标点击事件
      window.addEventListener("click", function (event) {
        createParticles(event.clientX, event.clientY);
      });

      // 启动动画循环
      requestAnimationFrame(loop);
    </script>
  </body>
</html>
